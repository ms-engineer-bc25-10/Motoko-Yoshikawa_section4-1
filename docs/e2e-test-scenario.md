# 🧪 E2E テストシナリオ（家計簿アプリ）

• 環境（localhost:3000 / 4000）

**✔️ シナリオ一覧**

| **No** | **シナリオ名** | **目的** | **優先度** | **結果** |
| --- | --- | --- | --- | --- |
| 1 | 履歴一覧が表示される | API から取得したデータが画面に出ることを確認 | 高 | ☐ |
| 2 | 新しい入出金を登録できる | 表示 → 入力 → POST → 画面更新 を確認 | 高 | ☐ |
| 3 | 入出金の削除ができる | 削除ボタン → API DELETE → 画面更新 | 高 | ☐ |
| 4 | 集計表が正しく更新される | 収入・支出・収支差が登録/削除の後に正しく変わる | 中 | ☐ |
| 5 | 日付ソート（降順）が維持される | 追加後も最新が上に来る | 中 | ☐ |
| 6 | フォーム入力チェック | 必須項目が空なら登録できない | 低 | ☐ |

## **✔️ 詳細シナリオ**

### **1. 履歴一覧が表示される**

- ブラウザで http://localhost:3000 を開く
- 「入出金履歴」の表が表示されている
- 行数が API の件数と一致している
- 日付が降順で並んでいる

---

### **2. 入出金を登録できる（基本シナリオ）**

**入力例：**

- 日付：2025-11-20
- 種別：支出
- 金額：1000
- メモ：テスト

**手順：**

- 各項目を入力し「登録」をクリック
- エラーが出ない
- テーブル最上部に新しい行が追加される
- 金額がフォーマットされて正しく表示される

---

### **3. 入出金の削除ができる**

- 任意の行の「削除」をクリック
- 確認モーダル（あれば OK 無ければそのまま）
- 行がテーブルから消える
- API に DELETE リクエストが送られている（DevTools network で確認）

---

### **4. 集計表が更新される**

- 新規登録 → 集計の「収入 / 支出 / 収支差」が変わるか確認
- 削除 → 再計算されることも確認

---

### **5. 日付降順が保たれる**

- 2025-11-20 など最新日付を登録
- テーブルの最上行がそのデータになる
- 古い日付を登録すると中間に入る

---

### **6. フォーム入力バリデーション**

- 日付が空なら登録不可
- 種別が空なら登録不可
- 金額が文字（“あああ” など）ならエラー
- エラーメッセージが表示される（またはコンソールに出る）